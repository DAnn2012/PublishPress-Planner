!function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=3)}([function(e,t,a){e.exports=function(e,t){var a,n,r=0;function s(){var s,l,i=a,o=arguments.length;e:for(;i;){if(i.args.length===arguments.length){for(l=0;l<o;l++)if(i.args[l]!==arguments[l]){i=i.next;continue e}return i!==a&&(i===n&&(n=i.prev),i.prev.next=i.next,i.next&&(i.next.prev=i.prev),i.next=a,i.prev=null,a.prev=i,a=i),i.val}i=i.next}for(s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return i={args:s,val:e.apply(null,s)},a?(a.prev=i,i.next=a):n=i,r===t.maxSize?(n=n.prev).next=null:r++,a=i,i.val}return t=t||{},s.clear=function(){a=null,n=null,r=0},s}},function(e,t,a){var n;!function(){"use strict";var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function s(e){return i(c(e),arguments)}function l(e,t){return s.apply(null,[e].concat(t||[]))}function i(e,t){var a,n,l,i,o,c,u,p,d,h=1,f=e.length,m="";for(n=0;n<f;n++)if("string"==typeof e[n])m+=e[n];else if("object"==typeof e[n]){if((i=e[n]).keys)for(a=t[h],l=0;l<i.keys.length;l++){if(null==a)throw new Error(s('[sprintf] Cannot access property "%s" of undefined value "%s"',i.keys[l],i.keys[l-1]));a=a[i.keys[l]]}else a=i.param_no?t[i.param_no]:t[h++];if(r.not_type.test(i.type)&&r.not_primitive.test(i.type)&&a instanceof Function&&(a=a()),r.numeric_arg.test(i.type)&&"number"!=typeof a&&isNaN(a))throw new TypeError(s("[sprintf] expecting number but found %T",a));switch(r.number.test(i.type)&&(p=a>=0),i.type){case"b":a=parseInt(a,10).toString(2);break;case"c":a=String.fromCharCode(parseInt(a,10));break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,i.width?parseInt(i.width):0);break;case"e":a=i.precision?parseFloat(a).toExponential(i.precision):parseFloat(a).toExponential();break;case"f":a=i.precision?parseFloat(a).toFixed(i.precision):parseFloat(a);break;case"g":a=i.precision?String(Number(a.toPrecision(i.precision))):parseFloat(a);break;case"o":a=(parseInt(a,10)>>>0).toString(8);break;case"s":a=String(a),a=i.precision?a.substring(0,i.precision):a;break;case"t":a=String(!!a),a=i.precision?a.substring(0,i.precision):a;break;case"T":a=Object.prototype.toString.call(a).slice(8,-1).toLowerCase(),a=i.precision?a.substring(0,i.precision):a;break;case"u":a=parseInt(a,10)>>>0;break;case"v":a=a.valueOf(),a=i.precision?a.substring(0,i.precision):a;break;case"x":a=(parseInt(a,10)>>>0).toString(16);break;case"X":a=(parseInt(a,10)>>>0).toString(16).toUpperCase()}r.json.test(i.type)?m+=a:(!r.number.test(i.type)||p&&!i.sign?d="":(d=p?"+":"-",a=a.toString().replace(r.sign,"")),c=i.pad_char?"0"===i.pad_char?"0":i.pad_char.charAt(1):" ",u=i.width-(d+a).length,o=i.width&&u>0?c.repeat(u):"",m+=i.align?d+a+o:"0"===c?d+o+a:o+d+a)}return m}var o=Object.create(null);function c(e){if(o[e])return o[e];for(var t,a=e,n=[],s=0;a;){if(null!==(t=r.text.exec(a)))n.push(t[0]);else if(null!==(t=r.modulo.exec(a)))n.push("%");else{if(null===(t=r.placeholder.exec(a)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){s|=1;var l=[],i=t[2],c=[];if(null===(c=r.key.exec(i)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(l.push(c[1]);""!==(i=i.substring(c[0].length));)if(null!==(c=r.key_access.exec(i)))l.push(c[1]);else{if(null===(c=r.index_access.exec(i)))throw new SyntaxError("[sprintf] failed to parse named argument key");l.push(c[1])}t[2]=l}else s|=2;if(3===s)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}a=a.substring(t[0].length)}return o[e]=n}t.sprintf=s,t.vsprintf=l,"undefined"!=typeof window&&(window.sprintf=s,window.vsprintf=l,void 0===(n=function(){return{sprintf:s,vsprintf:l}}.call(t,a,t,e))||(e.exports=n))}()},,function(e,t,a){"use strict";function n(e){var t;e.icon&&(t=React.createElement("span",{className:"dashicons dashicons-"+e.icon}));var a="publishpress-calendar-button "+(e.className||"");return React.createElement("a",{href:e.href||"#",className:a,onClick:e.onClick},t,e.label)}function r(e){return React.createElement("div",{className:"publishpress-calendar-navigation-bar"},React.createElement(n,{icon:"update-alt",onClick:e.refreshOnClickCallback}),React.createElement(n,{label:"«",onClick:e.backPageOnClickCallback}),React.createElement(n,{label:"‹",onClick:e.backOnClickCallback}),React.createElement(n,{label:"Today",onClick:e.todayOnClickCallback}),React.createElement(n,{label:"›",onClick:e.forwardOnClickCallback}),React.createElement(n,{label:"»",onClick:e.forwardPageOnClickCallback}))}a.r(t);var s=wp.i18n.__;function l(e){for(var t=[s("Sun","publishpress"),s("Mon","publishpress"),s("Tue","publishpress"),s("Wed","publishpress"),s("Thu","publishpress"),s("Fri","publishpress"),s("Sat","publishpress")],a=[],n=(e.weekStartsOnSunday?0:1)-1,r=0;r<7;r++)n++,6!==r||e.weekStartsOnSunday||(n=0),a.push({key:n.toString(),label:t[n]});return React.createElement(React.Fragment,null,a.map((function(e){return React.createElement("th",{key:e.key.toString()},e.label)})))}function i(e){var t=e.showSpinner||!1,a=e.message||"";return React.createElement("div",{className:"publishpress-calendar-message-bar"},t&&React.createElement("span",{className:"dashicons dashicons-update-alt publishpress-spinner"}),React.createElement("span",null,a))}var o=a(0),c=a.n(o);a(1);c()(console.error);var u,p,d,h;u={"(":9,"!":8,"*":7,"/":7,"%":7,"+":6,"-":6,"<":5,"<=":5,">":5,">=":5,"==":4,"!=":4,"&&":3,"||":2,"?":1,"?:":1},p=["(","?"],d={")":["("],":":["?","?:"]},h=/<=|>=|==|!=|&&|\|\||\?:|\(|!|\*|\/|%|\+|-|<|>|\?|\)|:/;var f={"!":function(e){return!e},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"==":function(e,t){return e===t},"!=":function(e,t){return e!==t},"&&":function(e,t){return e&&t},"||":function(e,t){return e||t},"?:":function(e,t,a){if(e)throw t;return a}};function m(e){var t=function(e){for(var t,a,n,r,s=[],l=[];t=e.match(h);){for(a=t[0],(n=e.substr(0,t.index).trim())&&s.push(n);r=l.pop();){if(d[a]){if(d[a][0]===r){a=d[a][1]||a;break}}else if(p.indexOf(r)>=0||u[r]<u[a]){l.push(r);break}s.push(r)}d[a]||l.push(a),e=e.substr(t.index+a.length)}return(e=e.trim())&&s.push(e),s.concat(l.reverse())}(e);return function(e){return function(e,t){var a,n,r,s,l,i,o=[];for(a=0;a<e.length;a++){if(l=e[a],s=f[l]){for(n=s.length,r=Array(n);n--;)r[n]=o.pop();try{i=s.apply(null,r)}catch(e){return e}}else i=t.hasOwnProperty(l)?t[l]:+l;o.push(i)}return o[0]}(t,e)}}var b={contextDelimiter:"",onMissingKey:null};function g(e,t){var a;for(a in this.data=e,this.pluralForms={},this.options={},b)this.options[a]=void 0!==t&&a in t?t[a]:b[a]}g.prototype.getPluralForm=function(e,t){var a,n,r,s,l=this.pluralForms[e];return l||("function"!=typeof(r=(a=this.data[e][""])["Plural-Forms"]||a["plural-forms"]||a.plural_forms)&&(n=function(e){var t,a,n;for(t=e.split(";"),a=0;a<t.length;a++)if(0===(n=t[a].trim()).indexOf("plural="))return n.substr(7)}(a["Plural-Forms"]||a["plural-forms"]||a.plural_forms),s=m(n),r=function(e){return+s({n:e})}),l=this.pluralForms[e]=r),l(t)},g.prototype.dcnpgettext=function(e,t,a,n,r){var s,l,i;return s=void 0===r?0:this.getPluralForm(e,r),l=a,t&&(l=t+this.options.contextDelimiter+a),(i=this.data[e][l])&&i[s]?i[s]:(this.options.onMissingKey&&this.options.onMissingKey(a,e),0===s?a:n)};const v={"":{plural_forms:e=>1===e?0:1}},y=/^i18n\.(n?gettext|has_translation)(_|$)/;var E=function(e){return"string"!=typeof e||""===e?(console.error("The namespace must be a non-empty string."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)||(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)};var R=function(e){return"string"!=typeof e||""===e?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)||(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)};var k=function(e,t){return function(a,n,r,s=10){const l=e[t];if(!R(a))return;if(!E(n))return;if("function"!=typeof r)return void console.error("The hook callback must be a function.");if("number"!=typeof s)return void console.error("If specified, the hook priority must be a number.");const i={callback:r,priority:s,namespace:n};if(l[a]){const e=l[a].handlers;let t;for(t=e.length;t>0&&!(s>=e[t-1].priority);t--);t===e.length?e[t]=i:e.splice(t,0,i),l.__current.forEach(e=>{e.name===a&&e.currentIndex>=t&&e.currentIndex++})}else l[a]={handlers:[i],runs:0};"hookAdded"!==a&&e.doAction("hookAdded",a,n,r,s)}};var C=function(e,t,a=!1){return function(n,r){const s=e[t];if(!R(n))return;if(!a&&!E(r))return;if(!s[n])return 0;let l=0;if(a)l=s[n].handlers.length,s[n]={runs:s[n].runs,handlers:[]};else{const e=s[n].handlers;for(let t=e.length-1;t>=0;t--)e[t].namespace===r&&(e.splice(t,1),l++,s.__current.forEach(e=>{e.name===n&&e.currentIndex>=t&&e.currentIndex--}))}return"hookRemoved"!==n&&e.doAction("hookRemoved",n,r),l}};var w=function(e,t){return function(a,n){const r=e[t];return void 0!==n?a in r&&r[a].handlers.some(e=>e.namespace===n):a in r}};var x=function(e,t,a=!1){return function(n,...r){const s=e[t];s[n]||(s[n]={handlers:[],runs:0}),s[n].runs++;const l=s[n].handlers;if(!l||!l.length)return a?r[0]:void 0;const i={name:n,currentIndex:0};for(s.__current.push(i);i.currentIndex<l.length;){const e=l[i.currentIndex].callback.apply(null,r);a&&(r[0]=e),i.currentIndex++}return s.__current.pop(),a?r[0]:void 0}};var _=function(e,t){return function(){var a,n;const r=e[t];return null!==(a=null===(n=r.__current[r.__current.length-1])||void 0===n?void 0:n.name)&&void 0!==a?a:null}};var S=function(e,t){return function(a){const n=e[t];return void 0===a?void 0!==n.__current[0]:!!n.__current[0]&&a===n.__current[0].name}};var D=function(e,t){return function(a){const n=e[t];if(R(a))return n[a]&&n[a].runs?n[a].runs:0}};class j{constructor(){this.actions=Object.create(null),this.actions.__current=[],this.filters=Object.create(null),this.filters.__current=[],this.addAction=k(this,"actions"),this.addFilter=k(this,"filters"),this.removeAction=C(this,"actions"),this.removeFilter=C(this,"filters"),this.hasAction=w(this,"actions"),this.hasFilter=w(this,"filters"),this.removeAllActions=C(this,"actions",!0),this.removeAllFilters=C(this,"filters",!0),this.doAction=x(this,"actions"),this.applyFilters=x(this,"filters",!0),this.currentAction=_(this,"actions"),this.currentFilter=_(this,"filters"),this.doingAction=S(this,"actions"),this.doingFilter=S(this,"filters"),this.didAction=D(this,"actions"),this.didFilter=D(this,"filters")}}const A=function(){return new j}(),{addAction:F,addFilter:T,removeAction:O,removeFilter:P,hasAction:I,hasFilter:N,removeAllActions:U,removeAllFilters:M,doAction:G,applyFilters:L,currentAction:z,currentFilter:Y,doingAction:W,doingFilter:$,didAction:V,didFilter:Q,actions:H,filters:J}=A,Z=((e,t,a)=>{const n=new g({}),r=new Set,s=()=>{r.forEach(e=>e())},l=(e,t="default")=>{n.data[t]={...v,...n.data[t],...e},n.data[t][""]={...v[""],...n.data[t][""]}},i=(e,t)=>{l(e,t),s()},o=(e="default",t,a,r,s)=>(n.data[e]||l(void 0,e),n.dcnpgettext(e,t,a,r,s)),c=(e="default")=>e,u=(e,t,n)=>{let r=o(n,t,e);return a?(r=a.applyFilters("i18n.gettext_with_context",r,e,t,n),a.applyFilters("i18n.gettext_with_context_"+c(n),r,e,t,n)):r};if(e&&i(e,t),a){const e=e=>{y.test(e)&&s()};a.addAction("hookAdded","core/i18n",e),a.addAction("hookRemoved","core/i18n",e)}return{getLocaleData:(e="default")=>n.data[e],setLocaleData:i,resetLocaleData:(e,t)=>{n.data={},n.pluralForms={},i(e,t)},subscribe:e=>(r.add(e),()=>r.delete(e)),__:(e,t)=>{let n=o(t,void 0,e);return a?(n=a.applyFilters("i18n.gettext",n,e,t),a.applyFilters("i18n.gettext_"+c(t),n,e,t)):n},_x:u,_n:(e,t,n,r)=>{let s=o(r,void 0,e,t,n);return a?(s=a.applyFilters("i18n.ngettext",s,e,t,n,r),a.applyFilters("i18n.ngettext_"+c(r),s,e,t,n,r)):s},_nx:(e,t,n,r,s)=>{let l=o(s,r,e,t,n);return a?(l=a.applyFilters("i18n.ngettext_with_context",l,e,t,n,r,s),a.applyFilters("i18n.ngettext_with_context_"+c(s),l,e,t,n,r,s)):l},isRTL:()=>"rtl"===u("ltr","text direction"),hasTranslation:(e,t,r)=>{var s,l;const i=t?t+""+e:e;let o=!(null===(s=n.data)||void 0===s||null===(l=s[null!=r?r:"default"])||void 0===l||!l[i]);return a&&(o=a.applyFilters("i18n.has_translation",o,e,t,r),o=a.applyFilters("i18n.has_translation_"+c(r),o,e,t,r)),o}}})(void 0,void 0,A);Z.getLocaleData.bind(Z),Z.setLocaleData.bind(Z),Z.resetLocaleData.bind(Z),Z.subscribe.bind(Z);const K=Z.__.bind(Z);Z._x.bind(Z),Z._n.bind(Z),Z._nx.bind(Z),Z.isRTL.bind(Z),Z.hasTranslation.bind(Z);function X(e,t,a,n,r,s,l){try{var i=e[s](l),o=i.value}catch(e){return void a(e)}i.done?t(o):Promise.resolve(o).then(n,r)}function q(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function l(e){X(s,n,r,l,i,"next",e)}function i(e){X(s,n,r,l,i,"throw",e)}l(void 0)}))}}function B(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=new Date(t,0,1+7*(e-1)),r=n.getDay(),s=n;return r<=4?s.setDate(n.getDate()-n.getDay()+1):s.setDate(n.getDate()+8-n.getDay()),a&&s.setDate(s.getDate()-1),s}function ee(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n=a.getDay();a.setDate(a.getDate()+4-(a.getDay()||7));var r=new Date(a.getFullYear(),0,1),s=Math.round(((a-r)/864e5+1)/7);return t&&0===n&&s++,[a.getFullYear(),s]}function te(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=ee(e,t);return B(a[1],a[0],t)}function ae(e){return e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")}function ne(e,t){return e.url?React.createElement("a",{href:e.url},e.label):e.action?React.createElement("a",{href:"javascript:void(0);",onClick:function(a){return t(a,e)}},e.label):void 0}function re(e,t,a){return se.apply(this,arguments)}function se(){return(se=q(regeneratorRuntime.mark((function e(t,a,n){var r,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n+"?action="+t,e.t0=regeneratorRuntime.keys(a);case 2:if((e.t1=e.t0()).done){e.next=9;break}if(s=e.t1.value,a.hasOwnProperty(s)){e.next=6;break}return e.abrupt("continue",2);case 6:r+="&"+s+"="+a[s],e.next=2;break;case 9:return e.next=11,fetch(r);case 11:return l=e.sent,e.next=14,l.json();case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(){return(le=q(regeneratorRuntime.mark((function e(t,a,n,r){var s,l,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=n+"?action="+t,e.t0=regeneratorRuntime.keys(a);case 2:if((e.t1=e.t0()).done){e.next=9;break}if(l=e.t1.value,a.hasOwnProperty(l)){e.next=6;break}return e.abrupt("continue",2);case 6:s+="&"+l+"="+a[l],e.next=2;break;case 9:return e.next=11,fetch(s,{method:"post",body:r});case 11:return i=e.sent,e.next=14,i.json();case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e){return e.isEditing?React.createElement("input",{type:"text",id:e.id,value:e.value,onChange:function(t){e.onChange&&e.onChange(t,t.target.value)}}):React.createElement("time",{dateTime:e.value,title:e.value,id:e.id},e.value)}var oe=jQuery;function ce(e){var t,a=React.useRef(null);React.useEffect((function(){var t={placeholder:e.placeholder||!1,tags:!0,allowClear:void 0===e.allowClear||null===e.allowClear||e.allowClear};return e.ajaxUrl&&(t.ajax={delay:250,url:e.ajaxUrl,dataType:"json",data:function(t){var a={q:t.term,action:e.ajaxAction,nonce:e.nonce};if(e.ajaxArgs)for(var n in e.ajaxArgs)e.ajaxArgs.hasOwnProperty(n)&&(a[n]=e.ajaxArgs[n]);return a},processResults:function(e){return{results:e}}}),oe(a.current).pp_select2(t).on("select2:select",(function(t){"function"==typeof e.onSelect&&e.onSelect(t,a.current,oe(a.current).pp_select2("data"))})).on("select2:clear",(function(t){"function"==typeof e.onClear&&e.onClear(t,a.current)})),function(){oe(a.current).pp_select2("destroy")}}),[]),e.options&&(t=e.options.map((function(e){return React.createElement("option",{value:e.value},e.text)})));var n="pp_select2";return e.className&&(n+=" "+e.className),React.createElement("select",{className:n,id:e.id,multiple:e.multiple,ref:a},e.placeholder?React.createElement("option",{value:""},e.placeholder):React.createElement(React.Fragment,null),t)}function ue(e){return e.isEditing?React.createElement(ce,{ajaxUrl:e.ajaxUrl,nonce:e.nonce,multiple:e.multiple,ajaxAction:"publishpress_calendar_search_authors",value:e.value,name:e.name,id:e.id,onSelect:e.onSelect,onClear:e.onClear}):React.createElement("span",{id:e.id},e.value.join(", "))}function pe(e){return e.isEditing?React.createElement("input",{type:"text",value:e.value}):React.createElement("span",null,e.value)}function de(e){return e.isEditing?React.createElement(ce,{options:e.options,id:e.id,value:e.value,allowClear:e.allowClear,onSelect:e.onSelect,onClear:e.onClear}):React.createElement("span",{id:e.id},e.value)}var he=wp.i18n.__;function fe(e){return e.isEditing?React.createElement(ce,{placeholder:e.placeholder,id:e.id,ajaxUrl:e.ajaxUrl,nonce:e.nonce,ajaxAction:"publishpress_calendar_search_terms",ajaxArgs:{taxonomy:e.taxonomy},value:e.value,multiple:e.multiple,onSelect:e.onSelect,onClear:e.onClear,className:e.className}):void 0===e.value||0===e.value.length?React.createElement("span",{id:e.id,className:"publishpress-calendar-empty-value"},he("No terms","publishpress")):React.createElement("span",{id:e.id},e.value.join(", "))}function me(e){return e.isEditing?React.createElement("input",{type:"checkbox",id:e.id,value:"1",checked:"Yes"===e.value}):"Yes"===e.value?React.createElement("span",{id:e.id,className:"dashicons dashicons-yes-alt"}):React.createElement("span",{id:e.id,className:"dashicons dashicons-no-alt"})}function be(e){return e.isEditing?React.createElement("input",{type:"location",id:e.id,value:e.value,onChange:function(t){e.onChange&&e.onChange(t,t.target.value)}}):React.createElement("span",{id:e.id},e.value)}function ge(e){return e.isEditing?React.createElement("textarea",{id:e.id,onChange:function(t){e.onChange&&e.onChange(t,t.target.value)}},e.value):React.createElement("div",{id:e.id},e.value)}function ve(e){return e.isEditing?React.createElement("input",{type:"text",id:e.id,value:e.value,onChange:function(t){e.onChange&&e.onChange(t,t.target.value)}}):React.createElement("span",{id:e.id},e.value)}function ye(e){return e.isEditing?React.createElement("input",{type:"text",id:e.id,value:e.value}):React.createElement("span",{id:e.id},e.value)}function Ee(e){var t;return e.isEditing?React.createElement("input",{type:"number",value:e.value,id:e.id,onChange:function(t){e.onChange&&e.onChange(t,t.target.value)}}):(t=0===e.value?"publishpress-calendar-empty-value":"",React.createElement("span",{id:e.id,className:t},e.value))}var Re=wp.i18n.__,ke=jQuery;function Ce(e){if(!e.data)return React.createElement(React.Fragment,null);if(!e.target.current)return React.createElement(React.Fragment,null);var t=ke(e.target.current).position(),a=ke(e.target.current).offset(),n=ke(e.target.current).width(),r=t.top,s=a.left+380+10+180>=ke(document).width()?t.left-25-380:t.left+n+10,l=function(t,a){t.preventDefault(),re(a.action,a.args,e.ajaxUrl).then((function(t){e.onItemActionClickCallback(a.action,e.id,t)}))};return React.createElement("div",{className:"publishpress-calendar-popup",style:{top:r,left:s}},React.createElement("div",{className:"publishpress-calendar-popup-title",style:{backgroundColor:e.color}},e.icon&&React.createElement("span",{className:"dashicons "+e.icon+" publishpress-calendar-icon"}),e.title,React.createElement("span",{className:"dashicons dashicons-no publishpress-calendar-popup-close",title:Re("Close","publishpress"),onClick:function(){ke(document).trigger("publishpress_calendar:close_popup")}})),React.createElement("table",null,React.createElement("tbody",null,function(){var t,a,n=[];for(var r in e.data.fields)if(e.data.fields.hasOwnProperty(r)){switch((t=e.data.fields[r]).type){case"date":case"time":a=React.createElement(ie,{value:t.value,isEditing:!1});break;case"authors":a=React.createElement(ue,{value:t.value,isEditing:!1});break;case"type":a=React.createElement(pe,{value:t.value,isEditing:!1});break;case"status":a=React.createElement(de,{value:t.value,isEditing:!1});break;case"taxonomy":a=React.createElement(fe,{value:t.value,isEditing:!1});break;case"checkbox":a=React.createElement(me,{value:t.value,isEditing:!1});break;case"location":a=React.createElement(be,{value:t.value,isEditing:!1});break;case"paragraph":a=React.createElement(ge,{value:t.value,isEditing:!1});break;case"text":a=React.createElement(ve,{value:t.value,isEditing:!1});break;case"user":a=React.createElement(ye,{value:t.value,isEditing:!1});break;case"number":a=React.createElement(Ee,{value:t.value,isEditing:!1});break;default:a=null}n.push(React.createElement("tr",null,React.createElement("th",null,t.label,":"),React.createElement("td",null,a)))}return n}())),React.createElement("hr",null),React.createElement("div",{className:"publishpress-calendar-popup-links"},function(){var t,a=[];for(var n in e.data.links)e.data.links.hasOwnProperty(n)&&((t=e.data.links[n]).url?a.push(React.createElement("a",{href:t.url},t.label)):t.action&&a.push(React.createElement("a",{href:"javascript:void(0);",onClick:function(e){return l(e,t)}},t.label)),a.push(React.createElement("span",null,"|")));return a.pop(),a}()))}var we=wp.i18n.__,xe=jQuery;function _e(e){var t,a=we("Untitled","publishpress"),n=React.useRef(null),r=e.showIcon&&e.icon?React.createElement("span",{className:"dashicons "+e.icon}," "):null,s=e.showTime?React.createElement("time",{className:"publishpress-calendar-item-time",dateTime:e.timestamp,title:e.timestamp},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ga",a=e.getHours();return"ga"===t||"ha"===t?0===a?a="12am":a<12?("ha"===t&&(a=a.toString().padStart(2,"0")),a+="am"):(a>12&&(a-=12),"ha"===t&&(a=a.toString().padStart(2,"0")),a+="pm"):a=a.toString().padStart(2,"0"),a}(new Date(Date.parse(e.timestamp)),e.timeFormat||"g:i a")):null,l=e.label||a;return React.createElement("li",{ref:n,className:(t="publishpress-calendar-item",e.collapse&&(t+=" publishpress-calendar-item-collapse"),e.isPopupOpened&&(t+=" publishpress-calendar-item-opened-popup"),t),style:{backgroundColor:e.color},"data-index":e.index,"data-id":e.id,"data-datetime":e.timestamp,onClick:function(t){var a;(a=t.target,xe(a).hasClass("publishpress-calendar-popup")||xe(a).parents(".publishpress-calendar-popup").length>0)||e.onClickItemCallback(e.id)}},r,s,l,e.isPopupOpened&&React.createElement(Ce,{target:n,id:e.id,title:l,icon:e.icon,timestamp:e.timestamp,color:e.color,data:e.isPopupOpened?e.getPopupItemDataCallback():null,onItemActionClickCallback:e.onItemActionClickCallback,ajaxUrl:e.ajaxUrl}))}function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==a)return;var n,r,s=[],l=!0,i=!1;try{for(a=a.call(e);!(l=(n=a.next()).done)&&(s.push(n.value),!t||s.length!==t);l=!0);}catch(e){i=!0,r=e}finally{try{l||null==a.return||a.return()}finally{if(i)throw r}}return s}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return De(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return De(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function je(e){var t,a,n,r,s=Se(React.useState(!1),2),l=s[0],i=s[1],o=0,c=function(){i(!l)},u=l?e.items:e.items.slice(0,e.maxVisibleItems);return React.createElement("td",{className:(a=e.date,n=e.todayDate,r=[1,2,3,4,5].indexOf(a.getDay())>=0?"business-day":"weekend-day",n.getFullYear()===a.getFullYear()&&n.getMonth()===a.getMonth()&&n.getDate()===a.getDate()&&(r+=" publishpress-calendar-today"),e.isLoading&&(r+=" publishpress-calendar-loading"),l&&(r+=" publishpress-calendar-uncollapse"),1===a.getDate()&&(r+=" publishpress-calendar-first-day-of-month"),e.isHovering&&(r+=" publishpress-calendar-hovering"),"publishpress-calendar-"+r),"data-year":e.date.getFullYear(),"data-month":e.date.getMonth()+1,"data-day":e.date.getDate()},React.createElement("div",{className:"publishpress-calendar-cell-header"},e.shouldDisplayMonthName&&React.createElement("span",{className:"publishpress-calendar-month-name"},(t=e.date.getMonth(),[K("Jan","publishpress"),K("Feb","publishpress"),K("Mar","publishpress"),K("Apr","publishpress"),K("May","publishpress"),K("Jun","publishpress"),K("Jul","publishpress"),K("Aug","publishpress"),K("Sep","publishpress"),K("Oct","publishpress"),K("Nov","publishpress"),K("Dec","publishpress")][t])),React.createElement("span",{className:"publishpress-calendar-date"},e.date.getDate())),React.createElement("ul",{className:"publishpress-calendar-day-items"},u.map((function(t){var a=t.id===e.openedItemId;return React.createElement(_e,{key:"item-"+t.id+"-"+e.date.getTime(),icon:t.icon,color:t.color,label:t.label,id:t.id,timestamp:t.timestamp,timeFormat:e.timeFormat,showTime:t.showTime,showIcon:!0,collapse:t.collapse,index:o++,isPopupOpened:a,getPopupItemDataCallback:e.getOpenedItemDataCallback,onClickItemCallback:e.onClickItemCallback,onItemActionClickCallback:e.onItemActionClickCallback,ajaxUrl:e.ajaxUrl})}))),function(){if(e.items.length>e.maxVisibleItems){var t=e.items.length-e.maxVisibleItems,a=l?"Hide the "+t+" last items":"Show "+t+" more",n=l?"publishpress-calendar-hide-items":"publishpress-calendar-show-more",r=l?"hidden":"visibility";return React.createElement("a",{href:"javascript:void(0);",className:n,onClick:c},React.createElement("span",{className:"dashicons dashicons-"+r})," ",a)}return React.createElement(React.Fragment,null)}())}var Ae=wp.i18n.__,Fe=wp.i18n._n;function Te(e){for(var t=function(t,a){var n=a?a[0].id:null;e.onChange(t,n)},a=function(e,a,n){t("status",n)},n=function(e,a,n){t("category",n)},r=function(e,a,n){t("tag",n)},s=function(e,a,n){t("author",n)},l=function(e,a,n){t("postType",n)},i=function(e,a,n){t("weeks",n)},o=function(e){return Fe("%d week","%d weeks",e,"publishpress").replace("%d",e)},c=o(e.numberOfWeeksToDisplay),u=[],p=1;p<=12;p++)u.push({value:p,text:o(p)});return React.createElement("div",{className:"publishpress-calendar-filter-bar"},React.createElement(ce,{placeholder:Ae("All statuses","publishpress"),options:e.statuses,onSelect:a,onClear:a}),React.createElement(fe,{placeholder:Ae("All categories","publishpress"),isEditing:!0,ajaxUrl:e.ajaxUrl,nonce:e.nonce,taxonomy:"category",onSelect:n,onClear:n,multiple:!1,className:"publishpress-calendar-category-filter"}),React.createElement(fe,{placeholder:Ae("All tags","publishpress"),isEditing:!0,ajaxUrl:e.ajaxUrl,nonce:e.nonce,taxonomy:"post_tag",onSelect:r,onClear:r,multiple:!1,className:"publishpress-calendar-tag-filter"}),React.createElement(ce,{placeholder:Ae("All authors","publishpress"),ajaxUrl:e.ajaxUrl,nonce:e.nonce,ajaxAction:"publishpress_calendar_search_authors",onSelect:s,onClear:s}),React.createElement(ce,{placeholder:Ae("All types","publishpress"),options:e.postTypes,onSelect:l,onClear:l}),React.createElement(ce,{placeholder:c,options:u,onSelect:i,onClear:i}))}function Oe(e){return e.isEditing?React.createElement("input",{type:"time",id:e.id,value:e.value,onChange:function(t){e.onChange&&e.onChange(t,t.target.value)}}):React.createElement("span",{id:e.id},e.value)}function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==a)return;var n,r,s=[],l=!0,i=!1;try{for(a=a.call(e);!(l=(n=a.next()).done)&&(s.push(n.value),!t||s.length!==t);l=!0);}catch(e){i=!0,r=e}finally{try{l||null==a.return||a.return()}finally{if(i)throw r}}return s}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ie(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Ne=wp.i18n.__,Ue=jQuery;function Me(e){var t=Pe(React.useState(e.postTypes[0].value),2),a=t[0],n=t[1],r=Pe(React.useState([]),2),s=r[0],l=r[1],i=Pe(React.useState(!1),2),o=i[0],c=i[1],u=Pe(React.useState(!1),2),p=u[0],d=u[1],h=Pe(React.useState(),2),f=h[0],m=h[1],b=function(){v(),R()},g=function(){Ue("#wpwrap").css("overflow","hidden")},v=function(){Ue("#wpwrap").css("overflow","auto")},y=function(){k("post_type",e.postTypes[0].value),k("status","draft")},E=function(e){return void 0===window.publishpressCalendaGlobal&&(window.publishpressCalendaGlobal={}),void 0===window.publishpressCalendaGlobal.formFieldsData&&(window.publishpressCalendaGlobal.formFieldsData={}),window.publishpressCalendaGlobal.formFieldsData.hasOwnProperty(e)?window.publishpressCalendaGlobal.formFieldsData[e]:null},R=function(){void 0!==window.publishpressCalendaGlobal&&void 0!==window.publishpressCalendaGlobal.formFieldsData&&(window.publishpressCalendaGlobal.formFieldsData=[])},k=function(e,t){!function(e,t){E(e),window.publishpressCalendaGlobal.formFieldsData[e]=t}(e,t)},C=function(t,a){t.preventDefault(),c(!0),d(a.id),m(null),function(e,t,a,n){return le.apply(this,arguments)}(a.action,a.args,e.ajaxUrl,function(){var t=new FormData;for(var a in t.append("date",ae(e.date)),t.append("nonce",e.nonce),window.publishpressCalendaGlobal.formFieldsData)window.publishpressCalendaGlobal.formFieldsData.hasOwnProperty(a)&&t.append(a,window.publishpressCalendaGlobal.formFieldsData[a]);return t}()).then((function(t){"create"===a.id?(c(!1),d(null),"success"===t.status?e.onCloseCallback&&e.onCloseCallback():m(t.message)):"edit"===a.id&&("success"===t.status?window.location.href=t.data.link:(c(!1),d(null),m(t.message)))}))},w=function(){setTimeout((function(){Ue(".publishpress-calendar-popup-form input").first().focus()}),500)};React.useEffect((function(){return R(),n(e.postTypes[0].value),y(),g(),b}),[]),React.useEffect((function(){c(!0);var t={nonce:e.nonce,postType:E("post_type")};l(null),re(e.actionGetPostTypeFields,t,e.ajaxUrl).then((function(e){l(e)})).then((function(){w(),y(),c(!1)}))}),[a]);var x=function(){var t,a,n,r=[],l=function(l){if(!s.hasOwnProperty(l))return"continue";switch(n="publishpress-calendar-field-"+l,(t=s[l]).type){case"date":a=React.createElement(ie,{value:t.value,isEditing:!0,id:n,onChange:function(e,t){k(l,t)}});break;case"authors":a=React.createElement(ue,{value:t.value,isEditing:!0,name:l,id:n,nonce:e.nonce,ajaxUrl:e.ajaxUrl,multiple:e.allowAddingMultipleAuthors,onSelect:function(e,t,a){for(var n=[],r=0;r<a.length;r++)n.push(a[r].id);k(l,n)},onClear:function(e,t){k(l,null)}});break;case"status":a=React.createElement(de,{value:t.value,isEditing:!0,id:n,options:e.statuses,onSelect:function(e,t,a){var n=null;a.length>0&&(n=a[0].id),k(l,n)},onClear:function(e,t){k(l,null)}});break;case"taxonomy":a=React.createElement(fe,{value:t.value,isEditing:!0,id:n,taxonomy:t.taxonomy,nonce:e.nonce,ajaxUrl:e.ajaxUrl,multiple:!0,onSelect:function(e,t,a){for(var n=[],r=0;r<a.length;r++)n.push(a[r].id);k(l,n)},onClear:function(e,t){k(l,null)}});break;case"checkbox":a=React.createElement(me,{isEditing:!0,id:n,value:t.value});break;case"location":a=React.createElement(be,{value:t.value,isEditing:!0,id:n,onChange:function(e,t){k(l,t)}});break;case"html":a=React.createElement(ge,{value:t.value,isEditing:!0,id:n,onChange:function(e,t){k(l,t)}});break;case"text":a=React.createElement(ve,{value:t.value,isEditing:!0,id:n,onChange:function(e,t){k(l,t)}});break;case"user":a=React.createElement(ye,{value:t.value,isEditing:!0,id:n});break;case"number":a=React.createElement(Ee,{value:t.value,isEditing:!0,id:n,onChange:function(e,t){k(l,t)}});break;case"time":a=React.createElement(Oe,{value:t.value,isEditing:!0,id:n,onChange:function(e,t){k(l,t)}});break;default:a=null}r.push(React.createElement("tr",null,React.createElement("th",null,React.createElement("label",{htmlFor:n},t.label,":")),React.createElement("td",null,a)))};for(var i in s)l(i);return r}();return React.createElement(React.Fragment,null,React.createElement("div",{className:"publishpress-calendar-popup-screen-lock"}),React.createElement("div",{className:"publishpress-calendar-popup publishpress-calendar-popup-form"},React.createElement("div",{className:"publishpress-calendar-popup-title"},e.postId?"":Ne("Schedule content for %s","publishpress").replace("%s",ae(e.date)),React.createElement("span",{className:"dashicons dashicons-no publishpress-calendar-popup-close",title:Ne("Close","publishpress"),onClick:e.onCloseCallback})),React.createElement("hr",null),React.createElement("table",null,React.createElement("tbody",null,e.postTypes.length>1&&React.createElement("tr",null,React.createElement("th",null,React.createElement("label",null,Ne("Post type:","publishpress"))),React.createElement("td",null,React.createElement(ce,{options:e.postTypes,allowClear:!1,onSelect:function(e){var t=Ue(e.target).pp_select2("data")[0].id;n(t),k("post_type",t)}}))),1===e.postTypes.length&&React.createElement("tr",null,React.createElement("th",null,React.createElement("label",null,Ne("Post type:","publishpress"))),React.createElement("td",null,function(t){for(var a=0;a<e.postTypes.length;a++)if(e.postTypes[a].value===t)return e.postTypes[a].text;return Ne("Post type not found","publishpress")}(a))),x.length>0&&x)),0===x.length&&React.createElement("div",{className:"publishpress-calendar-popup-loading-fields"},Ne("Please, wait! Loading the form fields...","publishpress")),f&&React.createElement("div",{className:"publishpress-calendar-popup-error-message"},React.createElement("span",{className:"dashicons dashicons-warning"}),f),React.createElement("hr",{className:"publishpress-calendar-popup-links-hr"}),React.createElement("div",{className:"publishpress-calendar-popup-links"},function(){var e,t=[{id:"create",label:Ne("Save","publishpress"),labelLoading:Ne("Saving...","publishpress"),action:"publishpress_calendar_create_item"},{id:"edit",label:Ne("Save and edit","publishpress"),labelLoading:Ne("Saving...","publishpress"),action:"publishpress_calendar_create_item"}],a=[];for(var n in t)t.hasOwnProperty(n)&&(e=t[n],p===e.id?a.push(React.createElement("span",null,e.labelLoading)):a.push(ne(e,C)),a.push(React.createElement("span",null,"|")));return a.pop(),a}(),o&&React.createElement("span",{className:"dashicons dashicons-update-alt publishpress-spinner"}))))}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==a)return;var n,r,s=[],l=!0,i=!1;try{for(a=a.call(e);!(l=(n=a.next()).done)&&(s.push(n.value),!t||s.length!==t);l=!0);}catch(e){i=!0,r=e}finally{try{l||null==a.return||a.return()}finally{if(i)throw r}}return s}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Le(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var ze=wp.i18n.__,Ye=jQuery;function We(e){var t=e.theme||"light",a=Ge(React.useState(te(e.firstDateToDisplay,e.weekStartsOnSunday)),2),n=a[0],s=a[1],o=Ge(React.useState(e.numberOfWeeksToDisplay),2),c=o[0],u=o[1],p=Ge(React.useState(e.items),2),d=p[0],h=p[1],f=Ge(React.useState(!1),2),m=f[0],b=f[1],g=Ge(React.useState(!1),2),v=g[0],y=g[1],E=Ge(React.useState(),2),R=E[0],k=E[1],C=Ge(React.useState(),2),w=C[0],x=C[1],_=Ge(React.useState(),2),S=_[0],D=_[1],j=Ge(React.useState(),2),A=j[0],F=j[1],T=Ge(React.useState(),2),O=T[0],P=T[1],I=Ge(React.useState(),2),N=I[0],U=I[1],M=Ge(React.useState(e.numberOfWeeksToDisplay),2),G=M[0],L=M[1],z=Ge(React.useState(),2),Y=z[0],W=z[1],$=Ge(React.useState([]),2),V=$[0],Q=$[1],H=Ge(React.useState(0),2),J=H[0],Z=H[1],K=Ge(React.useState(0),2),X=K[0],q=K[1],B=Ge(React.useState(),2),ee=B[0],ne=B[1],re=Ge(React.useState(),2),se=re[0],le=re[1],ie=function(t,a){return a||(a=""),e.ajaxUrl+"?action="+t+"&nonce="+e.nonce+a},oe=function(){document.removeEventListener("keydown",Ee),Ye(".publishpress-calendar tbody > tr > td").off("mouseenter")},ce=function(){Ye(".publishpress-calendar-day-hover").removeClass("publishpress-calendar-day-hover"),Ye(".publishpress-calendar-loading").removeClass("publishpress-calendar-loading")},ue=function(e){s(new Date(n.getTime()+7*e*24*60*60*1e3))},pe=function(t,a){var n=Ye(t.target),r=Ye(a.draggable[0]),s=ae(new Date(r.data("datetime")));Ye(t.target).addClass("publishpress-calendar-loading"),function(t,a,n,r,s){var l=d[t][a];b(!0),k(ze("Moving the item...","publishpress"));var i=ie(e.actionMoveItem),o=new FormData;o.append("id",l.id),o.append("year",n),o.append("month",r),o.append("day",s),fetch(i,{method:"POST",body:o}).then((function(e){return e.json()})).then((function(){q(X+1)}))}(s,r.data("index"),n.data("year"),n.data("month"),n.data("day"))},de=function(e,t){ce(),Ye(e.target).addClass("publishpress-calendar-day-hover")},he=function(e){var t=e.srcElement||e.target,a=Ye(t);return a.is("td.publishpress-calendar-business-day, td.publishpress-calendar-weekend-day, .publishpress-calendar-cell-header, .publishpress-calendar-date")?a.is(".publishpress-calendar-cell-header, .publishpress-calendar-date, .publishpress-calendar-show-more, .publishpress-calendar-date, .publishpress-calendar-month-name")?a.parents("td"):a:null},fe=function(e){return new Date(e.data("year")+"-"+e.data("month")+"-"+e.data("day"))},me=function(e){return Ye(e).hasClass("publishpress-calendar-day-hover")},be=function(){Ye(".publishpress-calendar tbody > tr > td").on("mouseover",(function(e){e.preventDefault(),e.stopPropagation();var t=he(e);if(t){if(me(t))return;ne(fe(t))}})).on("mouseout",(function(e){e.stopPropagation(),e.preventDefault();var t=he(e);t&&me(t)||ne(null)})).on("click",(function(e){var t=he(e);if(t){if(me(t))return;W(null),le(fe(t))}}))},ge=function(){W(null),Q(null),le(null)},ve=function(e){Q(null),ne(null),le(null),W(e)},ye=function(e,t,a){Z(J+1)},Ee=function(e){"Escape"===e.key&&ge()},Re=function(){return V},ke=function(){W(null)};React.useEffect((function(){return document.addEventListener("keydown",Ee),Ye(document).on("publishpress_calendar:close_popup",ke),e.userCanAddPosts&&be(),oe}),[]),React.useEffect((function(){Ye(".publishpress-calendar-day-items li").draggable({zIndex:99999,helper:"clone",containment:".publishpress-calendar table",start:function(e,t){if(Ye(e.target).data("id")===Y)return!1;Ye(e.target).addClass("ui-draggable-target"),ge(),y(!0)},stop:function(e,t){Ye(".ui-draggable-target").removeClass("ui-draggable-target"),y(!1)}}),Ye(".publishpress-calendar tbody > tr > td").droppable({drop:pe,over:de})})),e.userCanAddPosts&&React.useEffect(be,[n,c,G]),React.useEffect((function(){b(!0),k(ze("Loading...","publishpress"));var t=ie(e.actionGetData,"&start_date="+ae(te(n,e.weekStartsOnSunday))+"&number_of_weeks="+c);w&&(t+="&post_status="+w),S&&(t+="&category="+S),A&&(t+="&post_tag="+A),O&&(t+="&post_author="+O),N&&(t+="&post_author="+N),G&&(t+="&weeks="+G),fetch(t).then((function(e){return e.json()})).then((function(e){h(e),b(!1),k(null),ce()}))}),[n,c,G,O,A,S,w,N,X]),React.useEffect((function(){if(Y){b(!0),k(ze("Loading item...","publishpress"));var t=e.ajaxUrl+"?action=publishpress_calendar_get_post_data&nonce="+e.nonce+"&id="+Y;fetch(t).then((function(e){return e.json()})).then((function(e){b(!1),k(null),Q(e)}))}}),[Y,J]);var Ce=["publishpress-calendar","publishpress-calendar-theme-"+t];return e.userCanAddPosts&&Ce.push("user-can-add-posts"),React.createElement("div",{className:Ce.join(" ")},React.createElement(Te,{statuses:e.statuses,postTypes:e.postTypes,numberOfWeeksToDisplay:c,ajaxUrl:e.ajaxUrl,nonce:e.nonce,onChange:function(t,a){"status"===t&&x(a),"category"===t&&D(a),"tag"===t&&F(a),"author"===t&&P(a),"postType"===t&&U(a),"weeks"===t&&((0===(a=parseInt(a))||isNaN(a))&&(a=e.numberOfWeeksToDisplay),L(a),u(a))}}),React.createElement(r,{refreshOnClickCallback:function(e){e.preventDefault(),q(X+1)},backPageOnClickCallback:function(e){e.preventDefault(),ue(-1*c)},backOnClickCallback:function(e){e.preventDefault(),ue(-1)},forwardOnClickCallback:function(e){e.preventDefault(),ue(1)},forwardPageOnClickCallback:function(e){e.preventDefault(),ue(c)},todayOnClickCallback:function(t){t.preventDefault(),s(te(e.todayDate,e.weekStartsOnSunday))}}),React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement(l,{weekStartsOnSunday:e.weekStartsOnSunday}))),React.createElement("tbody",null,function(){for(var t,a,r=7*c,s=te(n,e.weekStartsOnSunday),l=[],i=[],o=0,u=s.getMonth(),p=0;p<r;p++)0===o&&(i=[]),(t=new Date(s)).setDate(t.getDate()+p),a=ae(t),i.push(React.createElement(je,{key:"day-"+t.getTime(),date:t,shouldDisplayMonthName:u!==t.getMonth()||0===p,todayDate:e.todayDate,isLoading:!1,isHovering:!v&&ee&&ee.getTime()===t.getTime()&&!se,items:d[a]||[],maxVisibleItems:e.maxVisibleItems,timeFormat:e.timeFormat,openedItemId:Y,getOpenedItemDataCallback:Re,ajaxUrl:e.ajaxUrl,onClickItemCallback:ve,onItemActionClickCallback:ye})),7===++o&&(o=0,l.push(React.createElement("tr",null,i))),u=t.getMonth();return l}())),se&&React.createElement(Me,{date:se,ajaxUrl:e.ajaxUrl,postTypes:e.singularPostTypes,statuses:e.statuses,actionGetPostTypeFields:e.actionGetPostTypeFields,nonce:e.nonce,onCloseCallback:function(){q(X+1),le(null)},allowAddingMultipleAuthors:e.allowAddingMultipleAuthors}),React.createElement(i,{showSpinner:m,message:R}))}jQuery((function(){var e,t,a;ReactDOM.render(React.createElement(We,{firstDateToDisplay:(e=publishpressCalendarParams.firstDateToDisplay,t=new Date(e),a=6e4*t.getTimezoneOffset(),new Date(t.getTime()+a)),weekStartsOnSunday:1===parseInt(publishpressCalendarParams.weekStartsOnSunday),numberOfWeeksToDisplay:publishpressCalendarParams.numberOfWeeksToDisplay,todayDate:new Date(publishpressCalendarParams.todayDate),timeFormat:publishpressCalendarParams.timeFormat,theme:publishpressCalendarParams.theme,statusesToDisplayTime:publishpressCalendarParams.statusesToDisplayTime,maxVisibleItems:publishpressCalendarParams.maxVisibleItems,ajaxUrl:publishpressCalendarParams.ajaxUrl,actionGetData:"publishpress_calendar_get_data",actionMoveItem:"publishpress_calendar_move_item",actionGetPostTypeFields:"publishpress_calendar_get_post_type_fields",nonce:publishpressCalendarParams.nonce,statuses:publishpressCalendarParams.statuses,postTypes:publishpressCalendarParams.postTypes,singularPostTypes:publishpressCalendarParams.singularPostTypes,userCanAddPosts:publishpressCalendarParams.userCanAddPosts,items:publishpressCalendarParams.items,allowAddingMultipleAuthors:publishpressCalendarParams.allowAddingMultipleAuthors}),document.getElementById("publishpress-calendar-wrap"))}))}]);